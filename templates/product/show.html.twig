{% extends "base.html.twig" %}

{% block title %}
    Page de
    {{ product.name }}

{% endblock %}

{% block body %}
    {{ dump(app.session.getBag('flashes')) }}

    {% for rubrique, messages in app.flashes %}
{#    Pour un for dans un tableau associatif :   #}
{#           Key       Value           #}
{#    {% for rubrique, messages in app.flashes %}#}
        <div class="alert alert-{{ rubrique }}">
            {% for message in messages %}
                <p>{{ message }}</p>
            {% endfor %}
        </div>
    {% endfor %}

    {{ dump(app.flashes('success')) }}
{#    Affiche et consomme un flash en particulier#}

    {#    {{ dump(app.flashes()) }}#}
    {#        Affiche et consomme tous les flashes#}
{#    {{ dump(app.session.getBag('flashes').get('success')) }}#}
    <ol class="breadcrumb">
        <li class="breadcrumb-item">
            <a href="{{ path('homepage') }}">Accueil</a>
        </li>
        <li class="breadcrumb-item">
            <a href="{{ path('product_category', {'slug':product.category.slug}) }}">{{ product.category.name }}</a>
        </li>
        <li class="breadcrumb-item active" aria-current="page">{{ product.name }}</li>
    </ol>
    <h1>{{ product.name }} ({{ product.price / 100 }} â‚¬)</h1>
    <div class="row">
        <div class="col-4">
            <img class="img-fluid" src="{{ product.mainPicture }}" alt="">
        </div>
        <div class="col">
            <span class="badge badge-primary">
                {{ product.category.name }}
            </span>
            <p>{{ product.shortDescription }}</p>
            <a href="{{ path('cart_add', {'id': product.id})}}" class="btn btn-success btn-lg">
                <i class="fas fa-shopping-cart">
                </i>
                Ajouter au panier
            </a>
        </div>
    </div>
{% endblock %}